/* ============ Design Tokens ============ */
:root{
  --bg:#f9fbff;
  --card:#fff;
  --ink:#0f172a;
  --ink-2:#1e293b;
  --muted:#64748b;
  --line:#e2e8f0;
  --brand-a:#3a7bd5;
  --brand-b:#00d2ff;
  --brand-a-d:#2e5ea3;
  --brand-b-d:#0099cc;
  --ok:#16a34a;
  --shadow:0 4px 14px rgba(0,0,0,.08);
  --shadow-lg:0 18px 44px rgba(0,0,0,.18);
}

/* ============ Root ============ */
.appointment-manager{
  padding:20px;
  background:var(--bg);
  min-height:100vh;
  font-family:"Segoe UI", Roboto, sans-serif;
}

/* ============ Header ============ */
.header{
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:30px; background:var(--card); padding:20px;
  border-radius:12px; box-shadow:var(--shadow);
}
.header h1{ color:#1e293b; margin:0; font-size:1.6rem; font-weight:700; }
.header p{ color:var(--muted); margin:5px 0 0; font-size:.95rem; }

.new-appointment-btn{
  background:linear-gradient(135deg,var(--brand-a),var(--brand-b));
  color:var(--primary-contrast); border:none; width:140px; height:38px; border-radius:25px;
  cursor:pointer; font-weight:600; font-size:14px; transition:.3s;
}
.new-appointment-btn:hover{
  background:linear-gradient(135deg,var(--brand-a-d),var(--brand-b-d));
  box-shadow:0 3px 8px rgba(0,0,0,.25);
}

/* ============ Stats ============ */
.stats-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; margin-bottom:30px; }
.stat-card{ background:var(--card); padding:20px; border-radius:12px; box-shadow:var(--shadow); transition:transform .2s; }
.stat-card:hover{ transform:translateY(-2px); }
.stat-card h3{ margin:0 0 10px; color:#64748b; font-size:14px; font-weight:500; }
.stat-number{ font-size:34px; font-weight:700; color:#1e3a8a; margin-bottom:5px; }

/* ============ Main Layout ============ */
.main-content{ display:grid; grid-template-columns:1fr 1fr; gap:30px; }
.calendar-section, .appointments-section{
  background:var(--card); padding:20px; border-radius:12px; box-shadow:var(--shadow);
}

/* ============ Calendar ============ */
.calendar-container{ width:100%; }
.calendar-header h3{ text-align:center; margin-bottom:20px; color:#1e293b; }
.calendar-weekdays{ display:grid; grid-template-columns:repeat(7,1fr); gap:8px; margin-bottom:10px; }
.weekday{ text-align:center; font-weight:600; color:#475569; padding:6px; font-size:.85rem; }
.calendar-days{ display:grid; grid-template-columns:repeat(7,1fr); gap:8px; }

.calendar-day{
  aspect-ratio:1; display:flex; flex-direction:column; align-items:center; justify-content:center;
  border:1.5px solid var(--line); border-radius:8px; cursor:pointer; position:relative;
  background:var(--bg); font-size:.95rem; font-weight:500; color:#334155; transition:.2s;
}
.calendar-day.empty{ border:none; cursor:default; background:transparent; }
.calendar-day:hover:not(.empty){ background:#f1f5f9; }
.calendar-day.selected{
  background:linear-gradient(135deg,var(--brand-a),var(--brand-b)); color:#fff; font-weight:600; border:none;
  box-shadow:0 3px 8px rgba(0,0,0,.2);
}
.calendar-day.today{ border:2px solid #2563eb; font-weight:700; }
.calendar-day.has-appointments{ background:#f0fdf4; border:1px solid var(--ok); }
.appointment-indicator{
  position:absolute; top:4px; right:4px; background:var(--ok); color:#fff; border-radius:50%;
  width:18px; height:18px; font-size:11px; display:flex; align-items:center; justify-content:center;
  font-weight:600; box-shadow:0 1px 4px rgba(0,0,0,.25);
}

/* ============ Appointment List ============ */
.appointments-section h3{
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:20px; color:#1e293b;
}
.appointment-count{ font-size:14px; color:var(--muted); font-weight:500; }

.appointment-card{
  display:grid; grid-template-columns:auto 1fr auto; gap:15px; padding:15px;
  border:1.5px solid var(--line); border-radius:10px; margin-bottom:12px; background:var(--surface);
  transition:transform .2s;
}
.appointment-card:hover{ transform:translateY(-2px); }

.appointment-time{ display:flex; flex-direction:column; align-items:center; gap:5px; }
.time{ font-weight:700; color:#1e293b; }

.status-badge{
  padding:4px 8px; border-radius:12px; color:#fff; font-size:10px; text-transform:uppercase; font-weight:600;
}

.appointment-details{ display:flex; flex-direction:column; gap:5px; }
.patient-info h4{ margin:0; color:#1e293b; font-weight:600; }
.patient-info p, .contact-info p{ margin:0; color:var(--muted); font-size:13px; }

/* actions column */
.appointment-actions{ position:relative; display:flex; flex-direction:column; gap:10px; }

/* base button styles */
.call-btn, .visit-btn, .delete-btn{
  padding:6px 12px; border:none; border-radius:8px; cursor:pointer; font-size:13px; font-weight:700; transition:.2s;
}
.call-btn{ background:#f8fafc; color:#475569; border:1px solid var(--line); }
.call-btn:hover{ background:#e2e8f0; }
.visit-btn{ background:linear-gradient(135deg,var(--brand-a),var(--brand-b)); color:var(--primary-contrast); }
.visit-btn:hover{ background:linear-gradient(135deg,var(--brand-a-d),var(--brand-b-d)); }
.delete-btn{ background:transparent; color:#dc2626; }
.delete-btn:hover{ color:#b91c1c; }

/* default message */
.no-appointments{ text-align:center; padding:40px 20px; color:var(--muted); }

/* schedule button */
.schedule-btn{
  background:linear-gradient(135deg,var(--brand-a),var(--brand-b)); color:var(--primary-contrast); border:none;
  padding:10px 22px; border-radius:25px; font-weight:600; cursor:pointer; transition:.3s;
}
.schedule-btn:hover{
  background:linear-gradient(135deg,var(--brand-a-d),var(--brand-b-d));
  box-shadow:0 3px 8px rgba(0,0,0,.25);
}
/* ============ Mini Overlay (3-dots) â€” pure white background + themed icons ============ */
.mini-overlay {
  position: absolute;
  right: 0;
  top: 3.4rem;
  width: 300px;
  max-width: 88vw;
  background: #ffffff !important;             /* pure white sheet */
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 8px 28px rgba(16, 24, 40, 0.12);
  padding: 6px 0;
  z-index: 9999;
  overflow: hidden;
  animation: miniFade .14s ease-out;
}

.mini-overlay__arrow {
  position: absolute;
  right: 16px;
  top: -7px;
  width: 14px;
  height: 14px;
  background: #ffffff !important;             /* pure white arrow */
  border-left: 1px solid var(--border);
  border-top: 1px solid var(--border);
  transform: rotate(45deg);
}

.mini-overlay__header {
  font-weight: 800;
  color: var(--text);
  padding: 10px 14px;
  background: #ffffff;                        /* white header */
  border-bottom: 1px solid var(--border);
}

/* Each option */
.mini-overlay__item {
  all: unset;
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 12px 16px;
  box-sizing: border-box;
  cursor: pointer;
  background: #ffffff !important;             /* keep white always */
  color: var(--text) !important;
  border-radius: 0;
  font: inherit;
  line-height: 1.2;
  transition: background 0.15s ease, color 0.15s ease;
}

.mini-overlay__item + .mini-overlay__item {
  border-top: 1px solid var(--border);
}

.mini-overlay__item:hover,
.mini-overlay__item:focus {
  background: var(--primary-soft) !important; /* subtle theme tint on hover */
  outline: none;
}

.mini-overlay__item:active {
  background: color-mix(in oklab, var(--primary-soft) 70%, white);
}

/* Themed icon chip */
.mini-overlay__icon {
  width: 26px;
  height: 26px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  background: color-mix(in srgb, var(--primary, var(--brand-a)) 12%, white);
  color: var(--primary, var(--brand-a));
  font-size: 16px;
}

/* Danger option */
.mini-overlay__item--danger {
  color: #dc2626 !important;
  font-weight: 700;
}
.mini-overlay__item--danger .mini-overlay__icon {
  background: color-mix(in srgb, #dc2626 12%, white);
  color: #dc2626;
}

@keyframes miniFade {
  from { opacity: 0; transform: translateY(-4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ============ Modal (single, deduped) ============ */
.form-overlay{
  position:fixed; inset:0; z-index:2000; display:flex; align-items:center; justify-content:center;
  background:rgba(12,27,60,.55); backdrop-filter:blur(2px); padding:16px;
}
.appointment-form{
  background:var(--bg); width:720px; max-width:92vw; border-radius:14px; box-shadow:var(--shadow-lg);
  padding:24px 28px 20px; box-sizing:border-box;
}

/* Header */
.form-header{
  position:relative; margin-bottom:12px; padding-right:42px; display:flex; align-items:center;
}
.form-header h3{ margin:0; font-size:1.25rem; font-weight:700; color:var(--ink); }

.close-btn{
  position:absolute; top:6px; right:6px; width:32px; height:32px; border-radius:0%;
  border:1px solid #fff; background:var(--bg); color:#475569; font-size:18px; line-height:0;
  display:flex; align-items:center; justify-content:center; cursor:pointer;
  transition:background .15s, box-shadow .15s, color .15s;
}
.close-btn:hover{ background:#f3f4f6; box-shadow:0 2px 8px rgba(0,0,0,.06); color:#1f2937; }

/* Fields */
.form-group{ margin:0; }
.form-group label{ display:block; margin:0 0 6px; font-weight:600; font-size:14px; color:#1e293b; }

.form-group input,
.form-group select,
.notes-textarea{
  width:100%; box-sizing:border-box; padding:10px 12px; border:1.5px solid var(--line);
  border-radius:10px; background:var(--bg); color:var(--ink); font-size:14px; outline:none;
  transition:border-color .15s, box-shadow .15s;
}
.form-group input:focus,
.form-group select:focus,
.notes-textarea:focus{ border-color:#2563eb; box-shadow:0 0 0 3px rgba(37,99,235,.15); }

.notes-textarea{ resize:vertical; min-height:80px; font-family:inherit; }

/* Grid (works reliably) */
.form-row{
  display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:14px 16px; margin-bottom:14px;
}
.form-row .form-group{ margin:0 !important; }
@media (max-width:640px){ .appointment-form{ width:100%; } .form-row{ grid-template-columns:1fr; } }

/* Actions (footer) */
.form-actions{
  margin-top:16px; padding-top:12px; border-top:1px solid #eef2f7;
  display:flex; justify-content:flex-end; gap:12px;
}
.cancel-btn, .submit-btn{
  padding:10px 20px; border:none; border-radius:999px; font-weight:700; font-size:14px; cursor:pointer;
}
.cancel-btn{ background:#f1f5f9; color:#475569; }
.cancel-btn:hover{ background:#e2e8f0; }
.submit-btn{
  background:linear-gradient(135deg,var(--brand-a),var(--brand-b)); color:var(--primary-contrast);
  box-shadow:0 6px 14px rgba(58,123,213,.25);
}
.submit-btn:hover{
  background:linear-gradient(135deg,var(--brand-a-d),var(--brand-b-d));
  box-shadow:0 8px 18px rgba(58,123,213,.35);
}

/* ============ Responsive (sections) ============ */
@media (max-width:768px){
  .main-content{ grid-template-columns:1fr; }
  .stats-grid{ grid-template-columns:1fr; }
  .form-actions{ flex-direction:column; gap:10px; }
  .cancel-btn, .submit-btn{ width:100%; }
}

/* ===== Force big, right-aligned close X (modal) ===== */
.appointment-form .close-btn,
.appointment-form .modal-close,
.appointment-form button[aria-label="Close"],
.appointment-form [data-close="modal"] {
  position: absolute !important;
  top: 10px !important;
  right: 12px !important;

  width: 40px !important;
  height: 40px !important;
  border-radius: 50% !important;

  display: flex !important;
  align-items: center !important;
  justify-content: center !important;

  background: #1f2a6b !important;
  color: var(--primary-contrast) !important;
  font-size: 22px !important;
  line-height: 1 !important;
  border: none !important;
  box-shadow: 0 2px 8px rgba(0,0,0,.12) !important;
  cursor: pointer !important;
}
.appointment-form .close-btn:hover,
.appointment-form .modal-close:hover,
.appointment-form button[aria-label="Close"]:hover,
.appointment-form [data-close="modal"]:hover {
  filter: brightness(1.06) !important;
}

/* ===== 3-dot more button base look (no sizing here) ===== */
.more-btn{
  background:linear-gradient(135deg, var(--brand-a), var(--brand-b));
  color:var(--primary-contrast);
  border:none;
  border-radius:8px;
  font-size:22px;
  font-weight:700;
  display:flex; align-items:center; justify-content:center;
  padding:0;
  box-shadow:0 4px 10px rgba(0,0,0,.15);
  cursor:pointer;
  transition:all .25s ease-in-out;
}
.more-btn:hover{
  transform:translateY(-1px);
  background:linear-gradient(135deg, var(--brand-a-d), var(--brand-b-d));
  box-shadow:0 6px 14px rgba(0,0,0,.2);
}
.more-btn i, .more-btn span{ color:var(--primary-contrast); font-size:22px; line-height:0; }

/* ===== EQUAL SIZE FOR ACTION BUTTONS (final override) ===== */
.appointment-card .appointment-actions .call-btn,
.appointment-card .appointment-actions .visit-btn,
.appointment-card .appointment-actions .more-btn{
  width:140px !important;   /* <<< change this to adjust width for all three */
  height:28px !important;   /* <<< common height */
  padding:0 12px !important;
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  border-radius:8px !important;
  box-sizing:border-box !important;
}
/* ============ New Appointment Button (fixed pill style) ============ */
.new-appointment-btn {
  display: inline-flex;                 /* ensures perfect centering */
  align-items: center;
  justify-content: center;

  background: linear-gradient(135deg, var(--brand-a), var(--brand-b));
  color: var(--primary-contrast);

  border: none;
  height: 42px;                         /* equal consistent pill height */
  padding: 0 24px;                      /* even horizontal padding */
  border-radius: 999px;                 /* true pill shape */

  font-size: 15px;
  font-weight: 700;
  letter-spacing: 0.2px;

  cursor: pointer;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.12);
  transition: all 0.3s ease;
  white-space: nowrap;                  /* prevents text wrapping */
}

.new-appointment-btn:hover {
  background: linear-gradient(135deg, var(--brand-a-d), var(--brand-b-d));
  transform: translateY(-1px);
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
}
/* ===== HARD OVERRIDE: Force PURE WHITE action menu ===== */

/* white container + arrow */
.mini-overlay,
.mini-overlay__arrow,
.mini-overlay__header { background:#fff !important; }
.mini-overlay { border:1px solid var(--border) !important; box-shadow:0 8px 28px rgba(16,24,40,.12) !important; }
.mini-overlay__arrow { border-left:1px solid var(--border) !important; border-top:1px solid var(--border) !important; }
.mini-overlay__header { border-bottom:1px solid var(--border) !important; color:var(--text) !important; font-weight:800 !important; }

/* reset ANY button style that sneaks in (visit-btn, call-btn, etc.) */
.mini-overlay button,
.mini-overlay .btn,
.mini-overlay .mini-overlay__item,
.mini-overlay .visit-btn,
.mini-overlay .call-btn,
.mini-overlay .delete-btn {
  all: unset !important;                         /* wipe inherited styles */
  display: flex !important;
  align-items: center !important;
  gap: 10px !important;
  width: 100% !important;
  padding: 12px 16px !important;
  box-sizing: border-box !important;
  cursor: pointer !important;

  background: #fff !important;                   /* PURE WHITE row */
  color: var(--text) !important;
  border: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  font: inherit !important;
  line-height: 1.2 !important;
}

/* row separators */
.mini-overlay button + button,
.mini-overlay .btn + .btn,
.mini-overlay .mini-overlay__item + .mini-overlay__item {
  border-top: 1px solid var(--border) !important;
}

/* hover/active feedback (theme tint, still white-based) */
.mini-overlay button:hover,
.mini-overlay .btn:hover,
.mini-overlay .mini-overlay__item:hover,
.mini-overlay button:focus,
.mini-overlay .btn:focus,
.mini-overlay .mini-overlay__item:focus {
  background: var(--primary-soft) !important;
  outline: none !important;
}
.mini-overlay button:active,
.mini-overlay .btn:active,
.mini-overlay .mini-overlay__item:active {
  background: color-mix(in srgb, var(--primary-soft) 70%, white) !important;
}

/* themed icon chip */
.mini-overlay .mini-overlay__icon {
  width: 26px; height: 26px; flex: 0 0 26px;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 8px;
  background: color-mix(in srgb, var(--primary, var(--brand-a)) 12%, white) !important;
  color: var(--primary, var(--brand-a)) !important;
  font-size: 16px; font-weight: 900;
}

/* danger variant */
.mini-overlay .mini-overlay__item--danger,
.mini-overlay .danger { color:#dc2626 !important; font-weight:700 !important; }
.mini-overlay .mini-overlay__item--danger .mini-overlay__icon {
  background: color-mix(in srgb, #dc2626 12%, white) !important;
  color:#dc2626 !important;
}
